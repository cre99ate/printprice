<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">  
    <title>출력물계산기</title>
</head>

<body>
    <div class="head">
        <div class="headtext">
            <h2>출력물계산기</h2>
        </div>
        <div class="content_movebtn">
            <input class="move_btn" type="button" onclick="location.href='channel.html'" value="채널">
            <input class="move_btn" type="button" onclick="location.href='scasi.html'" value="스카시">
            <input class="move_btn" type="button" onclick="location.href='lightLed.html'" value="전광판">
        </div>
    </div>
    <div class="content">
        <div class="infobox">
            <div class="whinfo">
                <label>가로 <input class="text_box" type="number" min=0 id="width-print" autofocus name="print-info"
                        value="">
                    cm</label>
                <p></p>
                <label>세로 <input class="text_box" type="number" min=0 id="height-print" name="print-info" value="">
                    cm</label>
                <p></p>
                <label>수량 <input class="text_box" type="number" min=1 id="ea-print" name="print-info" value="1">
                    장</label>
                <p></p>
                <p>헤베 :  <a id="hebe"></a></p>
            </div>
            <div class="clear">
                <input type="button" id="clear_btn" value="입력초기화">
            </div>
        </div>
        <div class="workselect">
            <div class='select'>
                <select id="sel-paper">
                    <option class='option-top' value="원단선택" selected>원단선택</option>
                    <optgroup label="후렉스">
                        <option class='option frame' value="조명후렉스">조명후렉스</option>
                        <option class='option frame' value="그레이후렉스">그레이후렉스</option>
                        <option class='option frame' value="메쉬천">메쉬천</option>
                    </optgroup>
                    <optgroup label="현수막/텐트천">
                        <option class='option cloth' value="현수막">현수막</option>
                        <option class='option clothBig' value="대형현수막">대형현수막</option>
                        <option class='option cloth' value="텐트천">텐트천</option>
                        <option class='option clothBig' value="대형텐트천">대형텐트천</option>
                        <option class='option sameData' value="동일저가">동일데이터_저가</option>
                        <option class='option sameData' value="동일보급">동일데이터_보급</option>
                    </optgroup>
                    <optgroup label="수성">
                        <option class='option sheet' value="유포지">유포지</option>
                        <option class='option sheet' value="유포그레이">유포그레이</option>
                        <option class='option sheet' value="캘지">캘지</option>
                        <option class='option sheet' value="캘그레이">캘그레이</option>                        
                        <option class='option sheet' value="패트지">패트지</option>
                        <option class='option sheet' value="와이드칼라">와이트칼라</option>
                    </optgroup>
                    <optgroup label="시트">
                        <option class='option sheet' value="일반시트">일반시트</option>
                        <option class='option sheet' value="철판시트">철판시트</option>
                        <option class='option sheet' value="차량시트">차량시트</option>
                        <option class='option sheet' value="조명시트">조명용시트</option>
                        <option class='option sheet' value="투명시트">투명시트</option>
                        <option class='option sheet' value="엠보시트">엠보시트</option>
                        <option class='option sheet' value="고투명점착시트">고투명점착시트</option>
                        <option class='option sheet' value="고투명비점착시트">고투명비점착시트</option>
                        <option class='option sheet' value="타공채널시트">타공채널시트</option>
                        <option class='option sheet' value="타공썬팅시트">타공썬팅시트</option>
                        <option class='option sheet' value="반사시트">반사시트</option>
                        <option class='option rubber' value="고무자석">고무자석</option>
                    </optgroup>
                </select>
            </div>
            
            <div class='method'>
                <div id="hide-coat" style="display: none;">               
                    <select id='sel-coat'>                                
                        <option  class="selcoat" selected="selected">방법선택</option>
                        <option  class="selcoat" value="0">출력만(코팅x)</option>
                        <option  class="selcoat" value="1">무광코팅</option>
                        <option  class="selcoat" value="2">유광코팅</option>
                        <option  class="selcoat" value="3">유브이코팅</option>                            
                        <option  class="selcoat" value="4">양면코팅</option>                                                    
                    </select>                
                </div>
                <div id="hide-frame" style="display: none;">                
                    <select id='sel-frame'>                                
                        <!-- 0_출력만 1_출력만(장폭) 2_후렘제작  3_후렘제작(장폭) 4_출력만(누끼) 5_출력만(장폭-누끼) 6_후렘제작(누끼)  7_후렘제작(장폭-누끼) -->
                        <option  class="selframe" selected="selected" >선택사항</option>
                        <option  class="selframe" value="0">출력만</option>
                        <option  class="selframe" value="2">후레임제작</option>
                        <option  class="selframe" value="4">출력만(풀누끼)</option>
                        <option  class="selframe" value="6">후레임제작(풀누끼)</option>                                                
                    </select>                
                </div>
                <div id="hide-rubber" style="display: none;">                
                    <select id='sel-rubber'>    
                        <option  class="selrubber" selected="selected" >원단폭선택</option>
                        <option  class="selrubber" value="0">60폭</option>
                        <option  class="selrubber" value="1">100폭</option>                        
                    </select>                
                </div>
                <div id="hide-clothBig" style="display: none;">                
                    <select id='sel-clothBig'>    
                        <option  class="selclothBig" selected="selected" >선택사항없음</option>                        
                    </select>                
                </div>
                <div id="hide-sameData" style="display: none;">                
                    <select id='sel-sameData'>                            
                        <option  class="selsameData" selected="selected">원단폭선택</option>
                        <option  class="selsameData" >70폭</option>
                        <option  class="selsameData" >90폭</option>                        
                    </select>                
                </div>
                <div id="hide-cloth" style="display: none;">                    
                    <select id="sel-cloth">
                        <option class="selcloth" selected="selected">원단폭선택</option>
                        <option class="selcloth" value="30폭">30폭</option>
                        <option class="selcloth" value="40폭">40폭</option>
                        <option class="selcloth" value="50폭">50폭</option>
                        <option class="selcloth" value="60폭">60폭</option>
                        <option class="selcloth" value="70폭">70폭</option>
                        <option class="selcloth" value="80폭">80폭</option>
                        <option class="selcloth" value="90폭">90폭</option>
                        <option class="selcloth" value="100폭">100폭</option>
                        <option class="selcloth" value="106폭">106폭</option>
                        <option class="selcloth" value="110폭">110폭</option>
                        <option class="selcloth" value="120폭">120폭</option>
                        <option class="selcloth" value="127폭">127폭</option>
                        <option class="selcloth" value="130폭">130폭</option>
                        <option class="selcloth" value="140폭">140폭</option>
                        <option class="selcloth" value="152폭">152폭</option>
                        <option class="selcloth" value="160폭">160폭</option>
                        <option class="selcloth" value="180폭">180폭</option>
                        <option class="selcloth" value="200폭">200폭</option>
                        <option class="selcloth" value="250폭">250폭</option>
                        <option class="selcloth" value="320폭">320폭</option>                        
                    </select>                    
                </div>
            </div>
        </div>
        <div class="infonumber">
            <table>
                 <tr> <!--첫번째줄 -->
                    <td width="200px">수성</td>
                    <td id="p_water" width="100px" ></td>
                    <td class="won" width="30px" >원</td>                    
                </tr>
                <tr> <!--2번째줄 -->
                    <td >솔벤</td>
                    <td id="p_solvent"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--3번째줄 -->
                    <td >라텍스</td>
                    <td id="p_latex"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--4번째줄 -->
                    <td >유브이_화이트만</td>
                    <td id="p_uvW"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--5번째줄 -->
                    <td >유브이_칼라만</td>
                    <td id="p_uvC"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--6번째줄 -->
                    <td >유브이_2레이어</td>
                    <td id="p_uvCw"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--7번째줄 -->
                    <td >유브이_3레이어</td>
                    <td id="p_uvCwc"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--8번째줄 -->
                    <td >유브이_후렉스조명모드</td>
                    <td id="p_uvCc"></td>
                    <td class="won">원</td>                    
                </tr>
                <tr> <!--9번째줄 -->
                    <td >유브이_후렉스차폐모드</td>
                    <td id="p_uvBlack"></td>
                    <td class="won">원</td>                    
                </tr>
            </table>
            
        </div>
        <div class="input">
            <button id="btn">계산하기</button>
        </div>
    </div>
    <script type="text/javascript" src="ss.js"></script>
    <script>
        let selected_paper = null; //원단선택값   

        const sel_paper = document.getElementById("sel-paper"); //원단종류선택자                
        const sel_opt = document.getElementsByClassName('option');
        
        const h_cloth = document.getElementById('hide-cloth');
        const h_clothBig = document.getElementById('hide-clothBig');
        const h_coat = document.getElementById('hide-coat');
        const h_frame = document.getElementById('hide-frame');
        const h_rubber = document.getElementById('hide-rubber');
        const h_sameData = document.getElementById('hide-sameData');

        const clear_btn = document.getElementById('clear_btn'); //초기화버튼

        const opt_frame = document.getElementsByClassName('frame'); //원단선택각내용
        const opt_cloth = document.getElementsByClassName('cloth');
        const opt_clothBig = document.getElementsByClassName('clothBig');
        const opt_sheet = document.getElementsByClassName('sheet');
        const opt_rubber = document.getElementsByClassName('rubber');
        const opt_sameData = document.getElementsByClassName('sameData');

        const sel_coat = document.getElementsByClassName('selcoat');
        const sel_frame = document.getElementsByClassName('selframe');
        const sel_cloth = document.getElementsByClassName('selcloth');
        const sel_clothBig = document.getElementsByClassName('selclothBig');
        const sel_rubber = document.getElementsByClassName('selrubber');
        const sel_sameData = document.getElementsByClassName('selsameData');

        let sel_value = null;

        sel_paper.addEventListener('change', function () {

            let num;
            for (let i = 0; i < sel_opt.length; i++) {
                sel_opt[i].selected ? num = i : {}
            }                

            let sel_className = sel_opt[num].className; //원단 클래스네임
           
            if (sel_className === 'option frame') {
                h_coat.style.display = "none";
                h_frame.style.display = "block";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "none";
                h_sameData.style.display = "none";
            } else if (sel_className === 'option cloth') {
                h_coat.style.display = "none";
                h_frame.style.display = "none";
                h_cloth.style.display = "block";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "none";
                h_sameData.style.display = "none";
            } else if (sel_className === 'option clothBig') {
                h_coat.style.display = "none";
                h_frame.style.display = "none";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "block";
                h_rubber.style.display = "none";
                h_sameData.style.display = "none";
            } else if (sel_className === 'option sheet') {
                h_coat.style.display = "block";
                h_frame.style.display = "none";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "none";
                h_sameData.style.display = "none";
            } else if (sel_className === 'option rubber') {
                h_coat.style.display = "none";
                h_frame.style.display = "none";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "block";
                h_sameData.style.display = "none";
            } else if (sel_className === 'option sameData') {
                h_coat.style.display = "none";
                h_frame.style.display = "none";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "none";
                h_sameData.style.display = "block";                
            } else {
                h_coat.style.display = "none";
                h_frame.style.display = "none";
                h_cloth.style.display = "none";
                h_clothBig.style.display = "none";
                h_rubber.style.display = "none";
                h_sameData.style.display = "none";
            }
        });

        clear_btn.addEventListener('click', function () {
            document.getElementById('width-print').value = "";
            document.getElementById('height-print').value = "";
            document.getElementById('ea-print').value = 1;

            sel_paper.selectedIndex = 0;
            h_coat.style.display = "none";
            h_frame.style.display = "none";
            h_cloth.style.display = "none";
            h_clothBig.style.display = "none";
            h_rubber.style.display = "none";
            h_sameData.style.display = "none";
        });

        document.getElementById('btn').addEventListener('click', function () {
            //치수입력
            const width = document.getElementById('width-print').value;
            const length = document.getElementById('height-print').value;
            const ea = document.getElementById('ea-print').value;

            let paper;            
            let mode;
            let nameClass;

            for (let i = 0; i < sel_opt.length; i++) {
                if(sel_opt[i].selected){
                    paper = sel_opt[i].value 
                    nameClass = sel_opt[i].className
                }
            }                
                        
            if ( h_coat.style.display === "block"){
                
                for (let i = 0; i < sel_coat.length; i++) {
                    sel_coat[i].selected ? mode = sel_coat[i].value : {}
                }
            }
            if ( h_frame.style.display === "block" ){
                for (let i = 0; i < sel_frame.length; i++) {
                    sel_frame[i].selected ? mode = sel_frame[i].value : {}
                }
            }
            if( h_cloth.style.display === "block" ){
                for (let i = 0; i < sel_cloth.length; i++) {
                    sel_cloth[i].selected ? mode = sel_cloth[i].value : {}
                }
            }
            if( h_clothBig.style.display === "block" ){
                
            }           
            
            if ( width === "" || length === "") {                
                alert('치수를 기입하세요');
            } else if ( sel_paper === null || sel_paper === '원단종류') {
                alert('원단종류를 선택하세요');
            } else {
                
                let ink = 'water'
                let lastData; 

                if ( nameClass === 'option frame' ){

                    lastData = findFrame( width, length, paper, mode )

                }else if ( nameClass === 'option cloth' ){
                    
                    lastData = findCloth( length, paper, mode)

                }else if ( nameClass === 'option clothBig' ){
                    
                    lastData = findClothPlus( width, length, paper )

                }else if ( nameClass === 'option sameData' ){
                    
                    lastData = findClothSameData( length, ea, paper  )

                }else if ( nameClass === 'option sheet' ){
                    
                    lastData = findSheet( width, length, paper, mode )

                }else if ( nameClass === 'option rubber' ){
                    
                    lastData = findRubber( width, length, paper, rubber_width )

                }
                
                let upLine =100; //10의 자리에서 올림

                let hebe = numComma( Math.ceil( lastData.hebe * 10 ) / 10); //헤베는 소수점2자리에서 올림 해서 소수1자리까지 구함
                let water = numComma( Math.ceil( lastData.price_water / upLine ) * upLine);
                let solvent = numComma( Math.ceil( lastData.price_solvent / upLine ) * upLine);
                let latex = numComma( Math.ceil( lastData.price_latex / upLine ) * upLine);
                let uvW = numComma( Math.ceil( lastData.price_uvW / upLine ) * upLine);
                let uvC = numComma( Math.ceil( lastData.price_uvC / upLine ) * upLine);
                let uvCw = numComma( Math.ceil( lastData.price_uvCw / upLine ) * upLine);
                let uvCwc = numComma( Math.ceil( lastData.price_uvCwc / upLine ) * upLine);
                let uvCc = numComma( Math.ceil( lastData.price_uvCc / upLine ) * upLine);
                let uvBlack = numComma( Math.ceil( lastData.price_uvBlack / upLine ) * upLine);

                
                lastData.hebe > 0 ? document.getElementById('hebe').innerText= hebe : document.getElementById('hebe').innerText= '-'
                lastData.price_water > 0 ? document.getElementById('p_water').innerText= water : document.getElementById('p_water').innerText= '-'
                lastData.price_solvent > 0 ? document.getElementById('p_solvent').innerText= solvent : document.getElementById('p_solvent').innerText= '-'
                lastData.price_latex > 0 ? document.getElementById('p_latex').innerText= latex : document.getElementById('p_latex').innerText= '-'
                lastData.price_uvW > 0 ? document.getElementById('p_uvW').innerText= uvW : document.getElementById('p_uvW').innerText= '-'
                lastData.price_uvC > 0 ? document.getElementById('p_uvC').innerText= uvC : document.getElementById('p_uvC').innerText= '-'
                lastData.price_uvCw > 0 ? document.getElementById('p_uvCw').innerText= uvCw : document.getElementById('p_uvCw').innerText= '-'
                lastData.price_uvCwc > 0 ? document.getElementById('p_uvCwc').innerText= uvCwc : document.getElementById('p_uvCwc').innerText= '-'
                lastData.price_uvCc > 0 ? document.getElementById('p_uvCc').innerText= uvCc : document.getElementById('p_uvCc').innerText= '-'
                lastData.price_uvBlack > 0 ? document.getElementById('p_uvBlack').innerText= uvBlack : document.getElementById('p_uvBlack').innerText= '-'
                
            }
        });

        function numComma(x) { //숫자 자리에 콤마넣기
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
    </script>
</body>

</html>